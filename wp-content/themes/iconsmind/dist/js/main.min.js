"use strict";!function(){$(function(){$.each($(".drop-menu"),function(){new n($(this))}),$.each($(".message-field"),function(){new i($(this))}),$(document).on("invalid.wpcf7",function(){$(".contact-us__form").find("fieldset").removeClass("novalid"),$(".contact-us__form").find(".wpcf7-not-valid-tip").each(function(){$(this).parents("fieldset").addClass("novalid")})}),$.each($("#mc-embedded-subscribe-form"),function(){new e($(this))}),$.each($(".packages"),function(){new t($(this))})});var e=function(e){var n=e,i=e.data("thank"),t=$(".promo_inner").data("action"),a="",o=function(){n.on("submit",function(){return a=$("#mce-EMAIL").val(),a.length<4?s():($("#mce-EMAIL").removeClass("mce_inline_error"),c()),!1})},s=function(){$("#mce-EMAIL").addClass("mce_inline_error")},c=function(){$.ajax({url:t,data:{EMAIL:a,action:"mchimp"},type:"POST",dataType:"json",success:function(e){"success"==e.result?(n[0].reset(),window.location.href=i):s()},error:function(){s()}})},r=function(){o()};r()},n=function(e){var n,i,t=e,a=$(".site__header__menu-btn"),o=$(".site__header"),s=(t.find(".drop-menu__inner"),t.find("#scroll-wrap")),c=!1,r=$(".site"),d=$("html"),u=$(window),h=function(){a.on({click:function(){return o.hasClass("site__header_drop-menu")?(o.removeClass("site__header_drop-menu"),r.css({height:""}),setTimeout(function(){r.height()>u.height()&&d.css({"overflow-y":""}),u.scrollTop(i),$(s).getNiceScroll().hide()},10)):(o.addClass("site__header_drop-menu"),i=u.scrollTop(),o.removeClass("site__header_fixed-white"),setTimeout(function(){r.height()>u.height()&&d.css({"overflow-y":"scroll"}),setTimeout(function(){r.css({height:"100%"}),f()},10),setTimeout(function(){$(s).getNiceScroll().show(),$(s).getNiceScroll().resize()},310)},300)),!1}}),u.on({scroll:function(){c=u.scrollTop()>=o.innerHeight(),c?o.addClass("site__header_fixed-white"):o.removeClass("site__header_fixed-white")},load:function(){c?o.addClass("site__header_fixed-white"):o.removeClass("site__header_fixed-white")},DOMMouseScroll:function(e){var n=e.originalEvent.detail;if(n){var i=n>0?1:-1;l(i)}},mousewheel:function(e){var n=e.originalEvent.wheelDelta;if(n){var i=n>0?-1:1;l(i)}},touchmove:function(e){var i=e.originalEvent.touches[0].clientY;i>n?l(-1):i<n&&l(1),n=i},keydown:function(e){switch(e.which){case 32:l(1);break;case 33:l(-1);break;case 34:l(1);break;case 35:l(1);break;case 36:l(-1);break;case 38:l(-1);break;case 40:l(1);break;default:return}}})},l=function(e){e>0&&!o.hasClass("site__header_hidden")&&c&&!o.hasClass("site__header_drop-menu")&&o.addClass("site__header_hidden"),e<0&&o.hasClass("site__header_hidden")&&c&&o.removeClass("site__header_hidden")},f=function(){$(s).niceScroll({autohidemode:"false",cursorborder:"",cursorcolor:"#fff",cursorwidth:"6px",cursorborderradius:"0"})},_=function(){h()};_()},i=function(e){var n=e,i=n.find("textarea.contact-us__form__message"),t=n.find(".message-field__text"),a=n.find(".message-field__height"),o=function(){n.on({keydown:function(){t.html(i.val()+"___"),i.css("height",t.height()+25),a.css("height",t.height())}})},s=function(){o()};s()},t=function(e){var n=function(){$(".paddle_button").on("click",function(){var e=$(this).data("product"),n=$(this).data("product_name");console.log(n),dataLayer.push({event:"track-purchase-click",productid:e,productname:n})}),$(".pricing__license a").on("click",function(){dataLayer.push({event:"track-purchase-customize"})})},i=function(){window.dataLayer=window.dataLayer||[],n()};i()}}();
!function(){$(function(){$(".popup").each(function(){new o($(this))})});var o=function(o){var n=this,t=40,i=$(".popup__open"),e=o,p=e.find(".popup__close, .popup__cancel"),c=e.find(".popup__wrap"),u=e.find(".popup__content"),s=$("html"),d=$(window),a=setTimeout(function(){},1),f=function(){d.height()-2*t-c.height()>0?c.css({top:(d.height()-2*t-c.height())/2}):c.css({top:0})},r=function(){var o,n=document.createElement("div");return n.className="popup__scrollbar-measure",document.body.appendChild(n),o=n.offsetWidth-n.clientWidth,document.body.removeChild(n),o},l=function(){e.css({overflowY:"hidden"}),setTimeout(function(){s.css({overflowY:"auto",paddingRight:0})},400),e.removeClass("popup_opened"),e.addClass("popup_hide"),a=setTimeout(function(){e.css({overflowY:"auto"}),e.removeClass("popup_hide")},800)},h=function(){e[0].obj=n,_()},_=function(){d.on({resize:function(){f()}}),i.on({click:function(){return m($(this).attr("data-popup")),!1}}),c.on({click:function(o){o.stopPropagation()}}),e.on({click:function(){return l(),!1}}),p.on({click:function(){return l(),!1}})},m=function(o){v(o),setTimeout(function(){s.css({overflowY:"hidden",paddingRight:r()})},400),e.addClass("popup_opened"),f()},v=function(o){var n=u.filter(".popup__"+o);u.css({display:"none"}),n.css({display:"block"})};h()}}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LnBvcHVwLmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiTWVudSIsInRoaXMiLCJNZXNzYWdlSGlnaCIsImRvY3VtZW50Iiwib24iLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJwYXJlbnRzIiwiYWRkQ2xhc3MiLCJNQyIsIlRNIiwib2JqIiwiX29iaiIsIl90aGFua3BhZ2UiLCJkYXRhIiwiX2RhdGFfYWN0aW9uIiwiX21haWwiLCJfb25FdmVudHMiLCJ2YWwiLCJsZW5ndGgiLCJfc2V0RXJyb3IiLCJfc2VuZCIsImFqYXgiLCJ1cmwiLCJFTUFJTCIsImFjdGlvbiIsInR5cGUiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJyZXNwIiwicmVzdWx0IiwicmVzZXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJlcnJvciIsImluaXQiLCJfbGFzdFBvcyIsInNpdGVTY3JvbGxUb3AiLCJfYnRuIiwiX2hlYWRlciIsIl9tZW51Q29udGVudCIsIl9hY3Rpb24iLCJfc2l0ZSIsIl9kb20iLCJfd2luZG93IiwiY2xpY2siLCJoYXNDbGFzcyIsImNzcyIsImhlaWdodCIsInNldFRpbWVvdXQiLCJvdmVyZmxvdy15Iiwic2Nyb2xsVG9wIiwiZ2V0TmljZVNjcm9sbCIsImhpZGUiLCJfaW5pdENvbnRlbnRTY3JvbGwiLCJzaG93IiwicmVzaXplIiwic2Nyb2xsIiwiaW5uZXJIZWlnaHQiLCJsb2FkIiwiRE9NTW91c2VTY3JvbGwiLCJlIiwiZGVsdGEiLCJvcmlnaW5hbEV2ZW50IiwiZGV0YWlsIiwiZGlyZWN0aW9uIiwiX2NoZWNrU2Nyb2xsIiwibW91c2V3aGVlbCIsIndoZWVsRGVsdGEiLCJ0b3VjaG1vdmUiLCJjdXJyZW50UG9zIiwidG91Y2hlcyIsImNsaWVudFkiLCJrZXlkb3duIiwid2hpY2giLCJuaWNlU2Nyb2xsIiwiYXV0b2hpZGVtb2RlIiwiY3Vyc29yYm9yZGVyIiwiY3Vyc29yY29sb3IiLCJjdXJzb3J3aWR0aCIsImN1cnNvcmJvcmRlcnJhZGl1cyIsIl9pbml0IiwiX21lc3NhZ2UiLCJfbWVzc2FnZVRleHQiLCJfbWVzc2FnZUhlaWdodCIsImh0bWwiLCJwcm9kdWN0X2lkIiwicHJvZHVjdF9uYW1lIiwiY29uc29sZSIsImxvZyIsImRhdGFMYXllciIsInB1c2giLCJldmVudCIsInByb2R1Y3RpZCIsInByb2R1Y3RuYW1lIiwiUG9wdXAiLCJfc2VsZiIsIl9wb3B1cFBhZGRpbmciLCJfYnRuU2hvdyIsIl9idG5DbG9zZSIsIl93cmFwIiwiX2NvbnRlbnRzIiwiX3Njcm9sbENvbnRlaW5lciIsIl90aW1lciIsIl9jZW50ZXJXcmFwIiwidG9wIiwiX2dldFNjcm9sbFdpZHRoIiwic2Nyb2xsQmFyV2lkdGgiLCJzY3JvbGxEaXYiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiX2hpZGUiLCJvdmVyZmxvd1kiLCJwYWRkaW5nUmlnaHQiLCJfc2hvdyIsImF0dHIiLCJzdG9wUHJvcGFnYXRpb24iLCJfc2V0UG9wdXBDb250ZW50IiwiY3VyQ29udGVudCIsImZpbHRlciIsImRpc3BsYXkiXSwibWFwcGluZ3MiOiJBQUFBLGNBQ0EsV0FFSUEsRUFBRyxXQUVDQSxFQUFFQyxLQUFNRCxFQUFHLGNBQWdCLFdBQ3ZCLEdBQUtFLEdBQU1GLEVBQUdHLFNBR2xCSCxFQUFFQyxLQUFNRCxFQUFHLGtCQUFvQixXQUMzQixHQUFJSSxHQUFhSixFQUFHRyxTQUd4QkgsRUFBRUssVUFBVUMsR0FBSSxnQkFBa0IsV0FDOUJOLEVBQUcscUJBQXNCTyxLQUFNLFlBQWFDLFlBQWEsV0FDekRSLEVBQUcscUJBQXNCTyxLQUFNLHdCQUF5Qk4sS0FBTSxXQUMxREQsRUFBR0csTUFBT00sUUFBUyxZQUFhQyxTQUFVLGVBSWxEVixFQUFFQyxLQUFLRCxFQUFFLCtCQUFnQyxXQUNyQyxHQUFJVyxHQUFHWCxFQUFFRyxTQUdiSCxFQUFFQyxLQUFNRCxFQUFHLGFBQWUsV0FDdEIsR0FBSVksR0FBSVosRUFBR0csVUFLbkIsSUFBSVEsR0FBSyxTQUFXRSxHQUNoQixHQUFJQyxHQUFPRCxFQUNQRSxFQUFhRixFQUFJRyxLQUFNLFNBQ3ZCQyxFQUFlakIsRUFBRSxnQkFBZ0JnQixLQUFLLFVBQ3RDRSxFQUFRLEdBQ1JDLEVBQVksV0FDUkwsRUFBS1IsR0FBSSxTQUFXLFdBUWhCLE1BUEFZLEdBQVFsQixFQUFHLGNBQWVvQixNQUNyQkYsRUFBTUcsT0FBUyxFQUNoQkMsS0FFQXRCLEVBQUcsY0FBZVEsWUFBYSxvQkFDL0JlLE1BRUcsS0FHZkQsRUFBWSxXQUNSdEIsRUFBRyxjQUFlVSxTQUFVLHFCQUVoQ2EsRUFBUSxXQUNKdkIsRUFBRXdCLE1BQ0VDLElBQUtSLEVBQ0xELE1BQVFVLE1BQVNSLEVBQU9TLE9BQVcsVUFDbkNDLEtBQU0sT0FDTkMsU0FBVSxPQUNWQyxRQUFTLFNBQVVDLEdBQ0ssV0FBZkEsRUFBS0MsUUFDTmxCLEVBQU0sR0FBSW1CLFFBQ1ZDLE9BQU9DLFNBQVNDLEtBQU9yQixHQUV2Qk8sS0FHUmUsTUFBTyxXQUNIZixRQUtaZ0IsRUFBTyxXQUNIbkIsSUFHUm1CLE1BR0FwQyxFQUFPLFNBQVdXLEdBQ2xCLEdBTUkwQixHQUNBQyxFQVBBMUIsRUFBT0QsRUFDUDRCLEVBQU96QyxFQUFHLDJCQUNWMEMsRUFBVTFDLEVBQUcsaUJBRWIyQyxHQURhN0IsRUFBS1AsS0FBTSxxQkFDVE8sRUFBS1AsS0FBTSxpQkFDMUJxQyxHQUFVLEVBR1ZDLEVBQVE3QyxFQUFFLFNBQ1Y4QyxFQUFPOUMsRUFBRyxRQUNWK0MsRUFBVS9DLEVBQUdrQyxRQUViZixFQUFZLFdBRVJzQixFQUFLbkMsSUFDRDBDLE1BQU8sV0E4REgsTUE1RElOLEdBQVFPLFNBQVUsMkJBRWxCUCxFQUFRbEMsWUFBYSwwQkFHckJxQyxFQUFNSyxLQUNGQyxPQUFVLEtBR2RDLFdBQVksV0FFSlAsRUFBTU0sU0FBV0osRUFBUUksVUFDekJMLEVBQUtJLEtBQ0RHLGFBQWMsS0FJdEJOLEVBQVFPLFVBQVdkLEdBRW5CeEMsRUFBRzJDLEdBQWVZLGdCQUFnQkMsUUFFbkMsTUFLSGQsRUFBUWhDLFNBQVUsMEJBRWxCOEIsRUFBZ0JPLEVBQVFPLFlBQ3hCWixFQUFRbEMsWUFBWSw0QkFFcEI0QyxXQUFZLFdBRUpQLEVBQU1NLFNBQVdKLEVBQVFJLFVBQ3pCTCxFQUFLSSxLQUNERyxhQUFjLFdBSXRCRCxXQUFZLFdBRVJQLEVBQU1LLEtBQ0ZDLE9BQVUsU0FHZE0sS0FFRCxJQUVITCxXQUFZLFdBRVJwRCxFQUFHMkMsR0FBZVksZ0JBQWdCRyxPQUNsQzFELEVBQUcyQyxHQUFlWSxnQkFBZ0JJLFVBRW5DLE1BRUosT0FJQSxLQUlmWixFQUFRekMsSUFDSnNELE9BQVEsV0FFSmhCLEVBQVVHLEVBQVFPLGFBQWVaLEVBQVFtQixjQUVyQ2pCLEVBQ0FGLEVBQVFoQyxTQUFTLDRCQUdqQmdDLEVBQVFsQyxZQUFZLDZCQUk1QnNELEtBQU0sV0FFRWxCLEVBQ0FGLEVBQVFoQyxTQUFTLDRCQUdqQmdDLEVBQVFsQyxZQUFZLDZCQUk1QnVELGVBQWdCLFNBQVdDLEdBRXZCLEdBQUlDLEdBQVFELEVBQUVFLGNBQWNDLE1BRTVCLElBQUtGLEVBQVEsQ0FFVCxHQUFJRyxHQUFjSCxFQUFRLEVBQU0sSUFFaENJLEdBQWNELEtBS3RCRSxXQUFZLFNBQVdOLEdBRW5CLEdBQUlDLEdBQVFELEVBQUVFLGNBQWNLLFVBRTVCLElBQUtOLEVBQVEsQ0FFVCxHQUFJRyxHQUFjSCxFQUFRLEtBQVcsQ0FFckNJLEdBQWNELEtBS3RCSSxVQUFXLFNBQVdSLEdBRWxCLEdBQUlTLEdBQWFULEVBQUVFLGNBQWNRLFFBQVEsR0FBR0MsT0FFdkNGLEdBQWFsQyxFQUVkOEIsTUFFUUksRUFBYWxDLEdBRXJCOEIsRUFBYyxHQUdsQjlCLEVBQVdrQyxHQUdmRyxRQUFTLFNBQVdaLEdBRWhCLE9BQVFBLEVBQUVhLE9BRU4sSUFBSyxJQUNEUixFQUFjLEVBQ2QsTUFDSixLQUFLLElBQ0RBLEtBQ0EsTUFDSixLQUFLLElBQ0RBLEVBQWMsRUFDZCxNQUNKLEtBQUssSUFDREEsRUFBYyxFQUNkLE1BQ0osS0FBSyxJQUNEQSxLQUNBLE1BQ0osS0FBSyxJQUNEQSxLQUNBLE1BQ0osS0FBSyxJQUNEQSxFQUFjLEVBQ2QsTUFFSixTQUNJLFlBTXBCQSxFQUFlLFNBQVVELEdBRWpCQSxFQUFZLElBQU0xQixFQUFRTyxTQUFVLHdCQUEyQkwsSUFBWUYsRUFBUU8sU0FBVSwyQkFDN0ZQLEVBQVFoQyxTQUFVLHVCQUdsQjBELEVBQVksR0FBSzFCLEVBQVFPLFNBQVUsd0JBQTJCTCxHQUM5REYsRUFBUWxDLFlBQVksd0JBSTVCaUQsRUFBcUIsV0FFakJ6RCxFQUFHMkMsR0FBZW1DLFlBQ2RDLGFBQWMsUUFDZEMsYUFBYyxHQUNkQyxZQUFhLE9BQ2JDLFlBQWEsTUFDYkMsbUJBQW9CLE9BSTVCQyxFQUFRLFdBQ0pqRSxJQUdSaUUsTUFJQWhGLEVBQWMsU0FBV1MsR0FFekIsR0FBSUMsR0FBT0QsRUFDUHdFLEVBQVd2RSxFQUFLUCxLQUFNLHNDQUN0QitFLEVBQWV4RSxFQUFLUCxLQUFNLHdCQUMxQmdGLEVBQWlCekUsRUFBS1AsS0FBTSwwQkFFNUJZLEVBQVksV0FFUkwsRUFBS1IsSUFDRHNFLFFBQVksV0FFUlUsRUFBYUUsS0FBTUgsRUFBU2pFLE1BQVEsT0FDcENpRSxFQUFTbkMsSUFBSyxTQUFVb0MsRUFBYW5DLFNBQVcsSUFDaERvQyxFQUFlckMsSUFBSyxTQUFVb0MsRUFBYW5DLGNBT3ZEaUMsRUFBUSxXQUNKakUsSUFHUmlFLE1BR0F4RSxFQUFLLFNBQVVDLEdBQ2YsR0FDSU0sR0FBWSxXQUVSbkIsRUFBRyxrQkFBa0JNLEdBQUksUUFBUyxXQUU5QixHQUFJbUYsR0FBYXpGLEVBQUVHLE1BQU1hLEtBQU0sV0FDM0IwRSxFQUFlMUYsRUFBRUcsTUFBTWEsS0FBTSxlQUNqQzJFLFNBQVFDLElBQUlGLEdBR1pHLFVBQVVDLE1BQU9DLE1BQVEsdUJBQXdCQyxVQUFZUCxFQUFZUSxZQUFjUCxNQUkzRjFGLEVBQUcsdUJBQXdCTSxHQUFJLFFBQVMsV0FDcEN1RixVQUFVQyxNQUFPQyxNQUFRLGdDQUlqQ3pELEVBQU8sV0FDSEosT0FBTzJELFVBQVkzRCxPQUFPMkQsY0FDMUIxRSxJQUdSbUI7Q0NwVlIsV0FFSXRDLEVBQUcsV0FFQ0EsRUFBRyxVQUFXQyxLQUFLLFdBRWYsR0FBSWlHLEdBQU1sRyxFQUFFRyxVQU1wQixJQUFJK0YsR0FBUSxTQUFVckYsR0FHbEIsR0FBSXNGLEdBQVFoRyxLQUNSaUcsRUFBZ0IsR0FDaEJDLEVBQVlyRyxFQUFHLGdCQUNmYyxFQUFPRCxFQUNQeUYsRUFBWXhGLEVBQUtQLEtBQU0saUNBQ3ZCZ0csRUFBUXpGLEVBQUtQLEtBQU0sZ0JBQ25CaUcsRUFBWTFGLEVBQUtQLEtBQU0sbUJBQ3ZCa0csRUFBbUJ6RyxFQUFHLFFBQ3RCK0MsRUFBVS9DLEVBQUdrQyxRQUNid0UsRUFBU3RELFdBQVksYUFBYyxHQUtuQ3VELEVBQWMsV0FDTDVELEVBQVFJLFNBQTZCLEVBQWhCaUQsRUFBc0JHLEVBQU1wRCxTQUFXLEVBQzdEb0QsRUFBTXJELEtBQU8wRCxLQUFTN0QsRUFBUUksU0FBNkIsRUFBaEJpRCxFQUF3QkcsRUFBTXBELFVBQWEsSUFFdEZvRCxFQUFNckQsS0FBTzBELElBQUssS0FHMUJDLEVBQWtCLFdBQ2QsR0FDSUMsR0FEQUMsRUFBWTFHLFNBQVMyRyxjQUFlLE1BV3hDLE9BUkFELEdBQVVFLFVBQVksMkJBRXRCNUcsU0FBUzZHLEtBQUtDLFlBQWFKLEdBRTNCRCxFQUFpQkMsRUFBVUssWUFBY0wsRUFBVU0sWUFFbkRoSCxTQUFTNkcsS0FBS0ksWUFBWVAsR0FFbkJELEdBRVhTLEVBQVEsV0FFSnpHLEVBQUtvQyxLQUNEc0UsVUFBVyxXQUdmcEUsV0FBWSxXQUVScUQsRUFBaUJ2RCxLQUNic0UsVUFBVyxPQUNYQyxhQUFjLEtBR25CLEtBRUgzRyxFQUFLTixZQUFhLGdCQUNsQk0sRUFBS0osU0FBVSxjQUVmZ0csRUFBU3RELFdBQVksV0FFakJ0QyxFQUFLb0MsS0FDRHNFLFVBQVcsU0FHZjFHLEVBQUtOLFlBQWEsZUFDbkIsTUFHUDRFLEVBQVEsV0FDSnRFLEVBQU0sR0FBSUQsSUFBTXNGLEVBQ2hCaEYsS0FFSkEsRUFBWSxXQUNSNEIsRUFBUXpDLElBQ0pxRCxPQUFRLFdBQ0pnRCxPQUdSTixFQUFTL0YsSUFDTDBDLE1BQU8sV0FFSCxNQURBMEUsR0FBTzFILEVBQUdHLE1BQU93SCxLQUFNLGdCQUNoQixLQUdmcEIsRUFBTWpHLElBQ0YwQyxNQUFPLFNBQVVnQixHQUNiQSxFQUFFNEQscUJBR1Y5RyxFQUFLUixJQUNEMEMsTUFBTyxXQUVILE1BREF1RSxNQUNPLEtBR2ZqQixFQUFVaEcsSUFDTjBDLE1BQU8sV0FFSCxNQURBdUUsTUFDTyxNQUluQkcsRUFBUSxTQUFVVCxHQUNkWSxFQUFrQlosR0FFbEI3RCxXQUFZLFdBRVJxRCxFQUFpQnZELEtBQ2JzRSxVQUFXLFNBQ1hDLGFBQWNaLE9BR25CLEtBRUgvRixFQUFLSixTQUFVLGdCQUNmaUcsS0FJSmtCLEVBQW1CLFNBQVVaLEdBQ3pCLEdBQUlhLEdBQWF0QixFQUFVdUIsT0FBUSxXQUFhZCxFQUVoRFQsR0FBVXRELEtBQU84RSxRQUFTLFNBQzFCRixFQUFXNUUsS0FBTzhFLFFBQVMsVUFRbkM1QyIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgJC5lYWNoKCAkKCAnLmRyb3AtbWVudScgKSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBuZXcgIE1lbnUoICQoIHRoaXMgKSApO1xuICAgICAgICB9ICk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCAnLm1lc3NhZ2UtZmllbGQnICksIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbmV3IE1lc3NhZ2VIaWdoKCAkKCB0aGlzICkgKTtcbiAgICAgICAgfSApO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCAnaW52YWxpZC53cGNmNycgLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCAnLmNvbnRhY3QtdXNfX2Zvcm0nICkuZmluZCggJ2ZpZWxkc2V0JyApLnJlbW92ZUNsYXNzKCAnbm92YWxpZCcgKTtcbiAgICAgICAgICAgICQoICcuY29udGFjdC11c19fZm9ybScgKS5maW5kKCAnLndwY2Y3LW5vdC12YWxpZC10aXAnICkuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCggdGhpcyApLnBhcmVudHMoICdmaWVsZHNldCcgKS5hZGRDbGFzcyggJ25vdmFsaWQnICk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcblxuICAgICAgICAkLmVhY2goJCgnI21jLWVtYmVkZGVkLXN1YnNjcmliZS1mb3JtJyksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIG5ldyBNQygkKHRoaXMpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJC5lYWNoKCAkKCAnLnBhY2thZ2VzJyApLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBuZXcgVE0oICQoIHRoaXMgKSApO1xuICAgICAgICB9ICk7XG4gICAgICAgIFxuICAgIH0gKTtcblxuICAgIHZhciBNQyA9IGZ1bmN0aW9uICggb2JqICkge1xuICAgICAgICB2YXIgX29iaiA9IG9iaixcbiAgICAgICAgICAgIF90aGFua3BhZ2UgPSBvYmouZGF0YSggJ3RoYW5rJyApLFxuICAgICAgICAgICAgX2RhdGFfYWN0aW9uID0gJCgnLnByb21vX2lubmVyJykuZGF0YSgnYWN0aW9uJyksXG4gICAgICAgICAgICBfbWFpbCA9ICcnO1xuICAgICAgICB2YXIgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9vYmoub24oICdzdWJtaXQnICwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBfbWFpbCA9ICQoICcjbWNlLUVNQUlMJyApLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIF9tYWlsLmxlbmd0aCA8IDQgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0RXJyb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoICcjbWNlLUVNQUlMJyApLnJlbW92ZUNsYXNzKCAnbWNlX2lubGluZV9lcnJvcicgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9zZW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKCAnI21jZS1FTUFJTCcgKS5hZGRDbGFzcyggJ21jZV9pbmxpbmVfZXJyb3InICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBfZGF0YV9hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgJ0VNQUlMJzogX21haWwsIFwiYWN0aW9uXCIgOiAnbWNoaW1wJ30sXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggcmVzcC5yZXN1bHQgPT0gJ3N1Y2Nlc3MnICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5yZXNldCggKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IF90aGFua3BhZ2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zZXRFcnJvcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3NldEVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIGluaXQoKVxuICAgIH07XG4gICAgXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiAoIG9iaiApIHtcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfYnRuID0gJCggJy5zaXRlX19oZWFkZXJfX21lbnUtYnRuJyApLFxuICAgICAgICAgICAgX2hlYWRlciA9ICQoICcuc2l0ZV9faGVhZGVyJyksXG4gICAgICAgICAgICBfbWVudUlubmVyID0gX29iai5maW5kKCAnLmRyb3AtbWVudV9faW5uZXInICksXG4gICAgICAgICAgICBfbWVudUNvbnRlbnQgPSBfb2JqLmZpbmQoICcjc2Nyb2xsLXdyYXAnICksXG4gICAgICAgICAgICBfYWN0aW9uID0gZmFsc2UsXG4gICAgICAgICAgICBfbGFzdFBvcyxcbiAgICAgICAgICAgIHNpdGVTY3JvbGxUb3AsXG4gICAgICAgICAgICBfc2l0ZSA9ICQoJy5zaXRlJyksXG4gICAgICAgICAgICBfZG9tID0gJCggJ2h0bWwnICksXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICk7XG5cbiAgICAgICAgdmFyIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgX2J0bi5vbigge1xuICAgICAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCBfaGVhZGVyLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2Ryb3AtbWVudScgKSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoICdzaXRlX19oZWFkZXJfZHJvcC1tZW51JyApO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2l0ZS5jc3MoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9zaXRlLmhlaWdodCgpID4gX3dpbmRvdy5oZWlnaHQoKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3dpbmRvdy5zY3JvbGxUb3AoIHNpdGVTY3JvbGxUb3AgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCBfbWVudUNvbnRlbnQgKS5nZXROaWNlU2Nyb2xsKCkuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTApO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX2Ryb3AtbWVudScgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpdGVTY3JvbGxUb3AgPSBfd2luZG93LnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9oZWFkZXIucmVtb3ZlQ2xhc3MoJ3NpdGVfX2hlYWRlcl9maXhlZC13aGl0ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9zaXRlLmhlaWdodCgpID4gX3dpbmRvdy5oZWlnaHQoKSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kb20uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ292ZXJmbG93LXknOiAnc2Nyb2xsJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zaXRlLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnMTAwJSdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2luaXRDb250ZW50U2Nyb2xsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCBfbWVudUNvbnRlbnQgKS5nZXROaWNlU2Nyb2xsKCkuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCggX21lbnVDb250ZW50ICkuZ2V0TmljZVNjcm9sbCgpLnJlc2l6ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMxMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF93aW5kb3cub24oIHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIF9hY3Rpb24gPSBfd2luZG93LnNjcm9sbFRvcCgpID49IF9oZWFkZXIuaW5uZXJIZWlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9hY3Rpb24gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5hZGRDbGFzcygnc2l0ZV9faGVhZGVyX2ZpeGVkLXdoaXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLnJlbW92ZUNsYXNzKCdzaXRlX19oZWFkZXJfZml4ZWQtd2hpdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9hY3Rpb24gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2hlYWRlci5hZGRDbGFzcygnc2l0ZV9faGVhZGVyX2ZpeGVkLXdoaXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLnJlbW92ZUNsYXNzKCdzaXRlX19oZWFkZXJfZml4ZWQtd2hpdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBET01Nb3VzZVNjcm9sbDogZnVuY3Rpb24gKCBlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQuZGV0YWlsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRlbHRhICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICggZGVsdGEgPiAwICkgPyAxIDogLTE7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIGRpcmVjdGlvbiApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbW91c2V3aGVlbDogZnVuY3Rpb24gKCBlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVsdGEgPSBlLm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBkZWx0YSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAoIGRlbHRhID4gMCApID8gLTEgOiAxO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCBkaXJlY3Rpb24gKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRvdWNobW92ZTogZnVuY3Rpb24gKCBlICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFBvcyA9IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLmNsaWVudFk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggY3VycmVudFBvcyA+IF9sYXN0UG9zICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCAtMSApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCBjdXJyZW50UG9zIDwgX2xhc3RQb3MgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIDEgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgX2xhc3RQb3MgPSBjdXJyZW50UG9zO1xuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGtleWRvd246IGZ1bmN0aW9uICggZSApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoKCBlLndoaWNoICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzMjpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCAxICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzM6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggLTEgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggMSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM1IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCAxICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzYgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2hlY2tTY3JvbGwoIC0xICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzg6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jaGVja1Njcm9sbCggLTEgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NoZWNrU2Nyb2xsKCAxICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY2hlY2tTY3JvbGwgPSBmdW5jdGlvbiggZGlyZWN0aW9uICkge1xuXG4gICAgICAgICAgICAgICAgaWYoIGRpcmVjdGlvbiA+IDAgJiYgIV9oZWFkZXIuaGFzQ2xhc3MoICdzaXRlX19oZWFkZXJfaGlkZGVuJyApICYmIF9hY3Rpb24gJiYgIV9oZWFkZXIuaGFzQ2xhc3MoICdzaXRlX19oZWFkZXJfZHJvcC1tZW51JyApICkge1xuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLmFkZENsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiggZGlyZWN0aW9uIDwgMCAmJiBfaGVhZGVyLmhhc0NsYXNzKCAnc2l0ZV9faGVhZGVyX2hpZGRlbicgKSAmJiBfYWN0aW9uICkge1xuICAgICAgICAgICAgICAgICAgICBfaGVhZGVyLnJlbW92ZUNsYXNzKCdzaXRlX19oZWFkZXJfaGlkZGVuJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXRDb250ZW50U2Nyb2xsID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAkKCBfbWVudUNvbnRlbnQgKS5uaWNlU2Nyb2xsKCB7XG4gICAgICAgICAgICAgICAgICAgIGF1dG9oaWRlbW9kZTogJ2ZhbHNlJyxcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yYm9yZGVyOiAnJyxcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yY29sb3I6IFwiI2ZmZlwiLFxuICAgICAgICAgICAgICAgICAgICBjdXJzb3J3aWR0aDogXCI2cHhcIixcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yYm9yZGVycmFkaXVzOiBcIjBcIlxuICAgICAgICAgICAgICAgIH0gKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG5cbiAgICB9O1xuXG4gICAgdmFyIE1lc3NhZ2VIaWdoID0gZnVuY3Rpb24gKCBvYmogKSB7XG5cbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfbWVzc2FnZSA9IF9vYmouZmluZCggJ3RleHRhcmVhLmNvbnRhY3QtdXNfX2Zvcm1fX21lc3NhZ2UnICksXG4gICAgICAgICAgICBfbWVzc2FnZVRleHQgPSBfb2JqLmZpbmQoICcubWVzc2FnZS1maWVsZF9fdGV4dCcgKSxcbiAgICAgICAgICAgIF9tZXNzYWdlSGVpZ2h0ID0gX29iai5maW5kKCAnLm1lc3NhZ2UtZmllbGRfX2hlaWdodCcgKTtcblxuICAgICAgICB2YXIgX29uRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICBfb2JqLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgICdrZXlkb3duJyA6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBfbWVzc2FnZVRleHQuaHRtbCggX21lc3NhZ2UudmFsKCkgKyAnX19fJyApO1xuICAgICAgICAgICAgICAgICAgICAgICAgX21lc3NhZ2UuY3NzKCAnaGVpZ2h0JywgX21lc3NhZ2VUZXh0LmhlaWdodCgpICsgMjUgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tZXNzYWdlSGVpZ2h0LmNzcyggJ2hlaWdodCcsIF9tZXNzYWdlVGV4dC5oZWlnaHQoKSApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICk7XG5cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBUTSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgdmFyIF9vYmogPSBvYmo7XG4gICAgICAgIHZhciBfb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAkKCAnLnBhZGRsZV9idXR0b24nKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb2R1Y3RfaWQgPSAkKHRoaXMpLmRhdGEoICdwcm9kdWN0JyApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdF9uYW1lID0gJCh0aGlzKS5kYXRhKCAncHJvZHVjdF9uYW1lJyApO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9kdWN0X25hbWUpOyBcbiAgICAgICAgICAgICAgICAgICAgLy8gYWRvcmljLnRyaWdnZXIoJ0luaXRpYXRlQ2hlY2tvdXQnKTtcblxuICAgICAgICAgICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCggeydldmVudCc6J3RyYWNrLXB1cmNoYXNlLWNsaWNrJywgJ3Byb2R1Y3RpZCc6cHJvZHVjdF9pZCwgJ3Byb2R1Y3RuYW1lJzpwcm9kdWN0X25hbWUgfSApO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAkKCAnLnByaWNpbmdfX2xpY2Vuc2UgYScgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCggeydldmVudCc6J3RyYWNrLXB1cmNoYXNlLWN1c3RvbWl6ZSd9ICk7XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZGF0YUxheWVyID0gd2luZG93LmRhdGFMYXllciB8fCBbXTtcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgaW5pdCgpXG4gICAgfTtcblxufSApKCk7IiwiKCBmdW5jdGlvbigpe1xuXG4gICAgJCggZnVuY3Rpb24oKXtcblxuICAgICAgICAkKCAnLnBvcHVwJyApLmVhY2goZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgbmV3IFBvcHVwKCQodGhpcykpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICB2YXIgUG9wdXAgPSBmdW5jdGlvbiggb2JqICl7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9zZWxmID0gdGhpcyxcbiAgICAgICAgICAgIF9wb3B1cFBhZGRpbmcgPSA0MCxcbiAgICAgICAgICAgIF9idG5TaG93ID0gICQoICcucG9wdXBfX29wZW4nICksXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxuICAgICAgICAgICAgX2J0bkNsb3NlID0gX29iai5maW5kKCAnLnBvcHVwX19jbG9zZSwgLnBvcHVwX19jYW5jZWwnICksXG4gICAgICAgICAgICBfd3JhcCA9IF9vYmouZmluZCggJy5wb3B1cF9fd3JhcCcgKSxcbiAgICAgICAgICAgIF9jb250ZW50cyA9IF9vYmouZmluZCggJy5wb3B1cF9fY29udGVudCcgKSxcbiAgICAgICAgICAgIF9zY3JvbGxDb250ZWluZXIgPSAkKCAnaHRtbCcgKSxcbiAgICAgICAgICAgIF93aW5kb3cgPSAkKCB3aW5kb3cgKSxcbiAgICAgICAgICAgIF90aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCl7fSwgMSApO1xuXG4gICAgICAgIHZhciBwbGF5ZXI7XG5cbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcbiAgICAgICAgdmFyIF9jZW50ZXJXcmFwID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpZiAoIF93aW5kb3cuaGVpZ2h0KCkgLSAoIF9wb3B1cFBhZGRpbmcgKiAyICkgLSBfd3JhcC5oZWlnaHQoKSA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgIF93cmFwLmNzcyggeyB0b3A6ICggKCBfd2luZG93LmhlaWdodCgpIC0gKCBfcG9wdXBQYWRkaW5nICogMiApICkgLSBfd3JhcC5oZWlnaHQoKSApIC8gMiB9ICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgX3dyYXAuY3NzKCB7IHRvcDogMCB9ICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRTY3JvbGxXaWR0aCA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyksXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbEJhcldpZHRoO1xuXG4gICAgICAgICAgICAgICAgc2Nyb2xsRGl2LmNsYXNzTmFtZSA9ICdwb3B1cF9fc2Nyb2xsYmFyLW1lYXN1cmUnO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2Nyb2xsRGl2ICk7XG5cbiAgICAgICAgICAgICAgICBzY3JvbGxCYXJXaWR0aCA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDtcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxCYXJXaWR0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGlkZSA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmNzcygge1xuICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1k6ICdoaWRkZW4nXG4gICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nUmlnaHQ6IDBcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfSwgNDAwICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICdwb3B1cF9oaWRlJyApO1xuXG4gICAgICAgICAgICAgICAgX3RpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBfb2JqLmNzcyAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3BvcHVwX2hpZGUnICk7XG4gICAgICAgICAgICAgICAgfSwgODAwICk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX29ialsgMCBdLm9iaiA9IF9zZWxmO1xuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbigge1xuICAgICAgICAgICAgICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfY2VudGVyV3JhcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF9idG5TaG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX3Nob3coICQoIHRoaXMgKS5hdHRyKCAnZGF0YS1wb3B1cCcgKSApO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgICAgIF93cmFwLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiggZSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfb2JqLm9uKCB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgX2hpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICAgICAgICBfYnRuQ2xvc2Uub24oIHtcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zaG93ID0gZnVuY3Rpb24oIGNsYXNzTmFtZSApe1xuICAgICAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQoIGNsYXNzTmFtZSApO1xuXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICAgICAgICBfc2Nyb2xsQ29udGVpbmVyLmNzcygge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnaGlkZGVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogX2dldFNjcm9sbFdpZHRoKClcbiAgICAgICAgICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICAgICAgfSwgNDAwICk7XG5cbiAgICAgICAgICAgICAgICBfb2JqLmFkZENsYXNzKCAncG9wdXBfb3BlbmVkJyApO1xuICAgICAgICAgICAgICAgIF9jZW50ZXJXcmFwKCk7XG5cblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRQb3B1cENvbnRlbnQgPSBmdW5jdGlvbiggY2xhc3NOYW1lICl7XG4gICAgICAgICAgICAgICAgdmFyIGN1ckNvbnRlbnQgPSBfY29udGVudHMuZmlsdGVyKCAnLnBvcHVwX18nICsgY2xhc3NOYW1lICk7XG5cbiAgICAgICAgICAgICAgICBfY29udGVudHMuY3NzKCB7IGRpc3BsYXk6ICdub25lJyB9ICk7XG4gICAgICAgICAgICAgICAgY3VyQ29udGVudC5jc3MoIHsgZGlzcGxheTogJ2Jsb2NrJyB9ICk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcblxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXG5cblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG59ICkoKTtcblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
